import { Telegraf } from 'telegraf';
import * as dotenv from 'dotenv';

dotenv.config();

const bot = new Telegraf(process.env.BOT_TOKEN!);

const allowedUserId = Number(process.env.ALLOWED_USER_ID);
const allowedChatId = Number(process.env.ALLOWED_CHAT_ID);

const tips = [
    // Ð—Ð°Ð³Ð°Ð»ÑŒÐ½Ñ–
    'ðŸ’¡ Ð”ÑƒÐ¼Ð°Ð¹, Ð¿ÐµÑ€Ñˆ Ð½Ñ–Ð¶ Ð´Ñ–ÑÑ‚Ð¸. Ð£Ð½Ð¸ÐºÐ°Ð¹ Ñ…Ð°Ð¾Ñ‚Ð¸Ñ‡Ð½Ð¸Ñ… Ð³Ð¾Ð»Ð¾ÑÑƒÐ²Ð°Ð½ÑŒ â€” Ñ†Ðµ Ð¼Ð¾Ð¶Ðµ Ð·Ñ–Ð³Ñ€Ð°Ñ‚Ð¸ Ð½Ð° Ñ€ÑƒÐºÑƒ Ð¼Ð°Ñ„Ñ–Ñ—.',
    'ðŸŸ¢ Ð‘ÑƒÐ´ÑŒ Ð°ÐºÑ‚Ð¸Ð²Ð½Ð¸Ð¼, Ð½Ð°Ð²Ñ–Ñ‚ÑŒ ÑÐº Ñ‚Ð¸ Ð¼Ð¸Ñ€Ð½Ð¸Ð¹ â€” Ð½Ðµ Ð¼Ð¾Ð²Ñ‡Ð¸, Ð´Ð¾Ð¿Ð¾Ð¼Ð°Ð³Ð°Ð¹ ÐºÐ¾Ð¼Ð°Ð½Ð´Ñ–!',
    'ðŸ‘ï¸â€ðŸ—¨ï¸ Ð¡Ð¿Ð¾ÑÑ‚ÐµÑ€Ñ–Ð³Ð°Ð¹ Ð·Ð° Ð¿Ð¾Ð²ÐµÐ´Ñ–Ð½ÐºÐ¾ÑŽ Ð³Ñ€Ð°Ð²Ñ†Ñ–Ð² â€” Ð½ÐµÑ€Ð²Ð¾Ð·Ð½Ñ–ÑÑ‚ÑŒ Ð°Ð±Ð¾ Ð°Ð³Ñ€ÐµÑÑ–Ñ Ð¼Ð¾Ð¶ÑƒÑ‚ÑŒ Ð²Ð¸Ð´Ð°Ñ‚Ð¸ Ð¼Ð°Ñ„Ñ–Ð¾Ð·Ñ–.',
    // Ð¡Ð»Ñ–Ð´Ñ‡Ð¸Ð¹
    'ðŸ•µï¸â€â™‚ï¸ Ð¡Ð»Ñ–Ð´Ñ‡Ð¸Ð¹: Ð¿Ñ€Ð¸ Ð¿ÐµÑ€ÐµÐ²Ñ–Ñ€Ñ†Ñ– Ð¼Ð¸Ñ€Ð½Ð¾Ð³Ð¾ Ð½Ðµ Ñ€Ð¾Ð·ÐºÑ€Ð¸Ð²Ð°Ð¹ Ð¹Ð¾Ð³Ð¾ Ñ‚Ð¾Ñ‡Ð½Ñƒ Ñ€Ð¾Ð»ÑŒ.',
    'ðŸ•µï¸â€â™‚ï¸ Ð¡Ð»Ñ–Ð´Ñ‡Ð¸Ð¹: ÑÐºÑ‰Ð¾ Ð·Ð½Ð°Ð¹ÑˆÐ¾Ð² Ð¼Ð°Ñ„Ñ–ÑŽ â€” Ð¿Ð¾Ð²Ñ–Ð´Ð¾Ð¼Ð»ÑÐ¹ ÑÐ°Ð¼, Ð½Ðµ Ñ‡ÐµÑ€ÐµÐ· Ñ–Ð½ÑˆÐ¸Ñ….',
    // Ð›Ñ–ÐºÐ°Ñ€
    'ðŸ’‰ Ð›Ñ–ÐºÐ°Ñ€: Ð¿Ñ€Ñ–Ð¾Ñ€Ð¸Ñ‚ÐµÑ‚ â€” Ð°ÐºÑ‚Ð¸Ð²Ð½Ñ– Ñ€Ð¾Ð»Ñ–, Ð¾ÑÐ¾Ð±Ð»Ð¸Ð²Ð¾ Ð¡Ð»Ñ–Ð´Ñ‡Ð¸Ð¹ Ñ–Ð· Ð¿Ñ–ÑÑ‚Ð¾Ð»ÐµÑ‚Ð¾Ð¼.',
    'ðŸ’‰ Ð›Ñ–ÐºÐ°Ñ€: Ð½Ðµ Ð»Ñ–ÐºÑƒÐ¹ Ð¾Ð´Ð½Ð¾Ð³Ð¾ Ñ– Ñ‚Ð¾Ð³Ð¾ Ð¶ Ð³Ñ€Ð°Ð²Ñ†Ñ Ð¿Ð¾ÑÑ‚Ñ–Ð¹Ð½Ð¾ â€” Ñ†Ðµ Ð¼Ð¾Ð¶Ðµ Ð³Ñ€Ð°Ñ‚Ð¸ Ð¿Ñ€Ð¾Ñ‚Ð¸ Ð²Ð°Ñ.',
    // Ð’Ð¾Ð»Ð¾Ñ†ÑŽÐ³Ð°
    'ðŸ§¥ Ð’Ð¾Ð»Ð¾Ñ†ÑŽÐ³Ð°: Ð¿ÐµÑ€ÐµÐ´ Ñ€Ð¾Ð·ÐºÑ€Ð¸Ñ‚Ñ‚ÑÐ¼ Ñ–Ð½Ñ„Ð¸ â€” Ð¿ÐµÑ€ÐµÐºÐ¾Ð½Ð°Ð¹ÑÑ, Ñ…Ñ‚Ð¾ Ð¿Ð¾Ð¼ÐµÑ€ Ð²Ð½Ð¾Ñ‡Ñ–.',
    // ÐŸÐ¾Ð²Ñ–Ñ
    'ðŸ‘  ÐŸÐ¾Ð²Ñ–Ñ: ÑÐºÑ‰Ð¾ Ñ‚ÐµÐ±Ðµ Ð²Ð±Ð¸Ð»Ð¸ â€” Ð¾Ð±Ð¾Ð²â€™ÑÐ·ÐºÐ¾Ð²Ð¾ ÑÐºÐ°Ð¶Ð¸, ÐºÐ¾Ð³Ð¾ Ð±Ð»Ð¾ÐºÑƒÐ²Ð°Ð»Ð°.',
    'ðŸ‘  ÐŸÐ¾Ð²Ñ–Ñ: Ð±Ð»Ð¾ÐºÑƒÐ¹ ÑÑ‚Ñ€Ð°Ñ‚ÐµÐ³Ñ–Ñ‡Ð½Ð¾, Ð° Ð½Ðµ Ð»Ð¸ÑˆÐµ Ð·Ð° Ñ–Ð½Ñ‚ÑƒÑ—Ñ†Ñ–Ñ”ÑŽ.',
    // Ð–ÑƒÑ€Ð½Ð°Ð»Ñ–ÑÑ‚ÐºÐ°
    'ðŸ“° Ð–ÑƒÑ€Ð½Ð°Ð»Ñ–ÑÑ‚ÐºÐ°: ÑƒÐ½Ð¸ÐºÐ°Ð¹ Ð±ÐµÐ·Ð³Ð»ÑƒÐ·Ð´Ð¸Ñ… Ð¿ÐµÑ€ÐµÐ²Ñ–Ñ€Ð¾Ðº â€” Ð¼Ð¸ÑÐ»Ð¸ ÑÑ‚Ñ€Ð°Ñ‚ÐµÐ³Ñ–Ñ‡Ð½Ð¾.',
    'ðŸ“° Ð–ÑƒÑ€Ð½Ð°Ð»Ñ–ÑÑ‚ÐºÐ°: Ð·Ð½Ð°Ð¹Ð´Ð¸ Ð½Ð°Ð´Ñ–Ð¹Ð½Ð¾Ð³Ð¾ Ð¼Ð¸Ñ€Ð½Ð¾Ð³Ð¾ Ð´Ð»Ñ Ð¿ÐµÑ€ÐµÐ²Ñ–Ñ€Ð¾Ðº.',
    // Ð†Ð½ÑˆÐµ
    'ðŸ¤ ÐÐµ Ñ€Ð¾Ð·Ð¿Ð¾Ð²Ñ–Ð´Ð°Ð¹ Ð¿ÑƒÐ±Ð»Ñ–Ñ‡Ð½Ð¾, Ñ…Ñ‚Ð¾ Ð´Ð¾ Ñ‚ÐµÐ±Ðµ Ð¿Ñ€Ð¸Ñ…Ð¾Ð´Ð¸Ð² â€” Ñ†Ðµ Ð·Ð°Ñ…Ð¸Ñ‰Ð°Ñ” Ð°ÐºÑ‚Ð¸Ð²Ð½Ñ– Ñ€Ð¾Ð»Ñ–.',
    'ðŸ’€ Ð¯ÐºÑ‰Ð¾ Ñ‚ÐµÐ±Ðµ Ð²Ð±Ð¸Ð»Ð¸ â€” Ð·Ð°Ð»Ð¸Ñˆ ÐºÐ¾Ñ€Ð¸ÑÐ½Ñƒ Ñ–Ð½Ñ„Ñƒ, Ð°Ð»Ðµ Ð½Ðµ Ð²Ð¸ÐºÑ€Ð¸Ð²Ð°Ð¹ Ñ€Ð¾Ð»Ñ–.',
    'ðŸŒ™ ÐÐµÐ¼Ð°Ñ” Ð²Ð±Ð¸Ð²ÑÑ‚Ð²Ð° Ð²Ð½Ð¾Ñ‡Ñ–? ÐœÐ¾Ð¶Ð»Ð¸Ð²Ð¾, Ð›Ñ–ÐºÐ°Ñ€ Ð²Ñ€ÑÑ‚ÑƒÐ²Ð°Ð² Ð°Ð±Ð¾ ÐŸÐ¾Ð²Ñ–Ñ Ð·Ð°Ð±Ð»Ð¾ÐºÑƒÐ²Ð°Ð»Ð°.',
    'ðŸ”„ ÐÐµ Ð·Ð°Ñ†Ð¸ÐºÐ»ÑŽÐ¹ÑÑ Ð½Ð° Ð¾Ð´Ð½Ñ–Ð¹ Ñ‚ÐµÐ¾Ñ€Ñ–Ñ— â€” Ð±ÑƒÐ´ÑŒ Ð³Ð½ÑƒÑ‡ÐºÐ¸Ð¼.',
    'ðŸ¤ Ð¡Ð¿Ñ–Ð²Ð¿Ñ€Ð°Ñ†ÑŽÐ¹ Ñ– ÐºÐ¾Ð¾Ñ€Ð´Ð¸Ð½ÑƒÐ¹ÑÑ Ð· Ñ–Ð½ÑˆÐ¸Ð¼Ð¸ â€” Ñ‚Ð°Ðº Ð²Ð¸ Ð¿ÐµÑ€ÐµÐ¼Ð¾Ð¶ÐµÑ‚Ðµ.',
    'ðŸŽ² Ð†Ð½Ð¾Ð´Ñ– Ñ€Ð¸Ð·Ð¸Ðº â€” Ñ†Ðµ Ð½Ð°Ð¹ÐºÑ€Ð°Ñ‰Ð° ÑÑ‚Ñ€Ð°Ñ‚ÐµÐ³Ñ–Ñ. ÐÐµ Ð±Ñ–Ð¹ÑÑ Ð´Ñ–ÑÑ‚Ð¸!',
];

bot.on('text', (ctx) => {
    const message = ctx.message;
    const text = message.text.trim();

    const isFromAllowedUser = message.from.id === allowedUserId;
    const isInAllowedChat = message.chat.id === allowedChatId;
    const isStartCommand = text.startsWith('Ð“Ñ€Ð° Ñ€Ð¾Ð·Ð¿Ð¾Ñ‡Ð°Ñ‚Ð°!');
    const isTriggerCommand = text.startsWith('/start') || text.startsWith('/game');

    if (isTriggerCommand && isInAllowedChat) {
        const randomTip = tips[Math.floor(Math.random() * tips.length)];
        console.log(randomTip);
        ctx.reply("!" + randomTip);
    }
});

bot.launch();
console.log('Ð‘Ð¾Ñ‚ Ð·Ð°Ð¿ÑƒÑ‰ÐµÐ½Ð¾ âœ…');

process.once('SIGINT', () => bot.stop('SIGINT'));
process.once('SIGTERM', () => bot.stop('SIGTERM'));
